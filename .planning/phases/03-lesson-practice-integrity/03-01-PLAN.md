---
phase: 03-lesson-practice-integrity
plan: 01
type: execute
---

<objective>
Document current practice content sources and the gap between practice and curriculum systems.

Purpose: Create clear documentation of discovery findings so future work (vocab seeding, practice filtering) has proper context.
Output: DISCOVERY.md with practice audit findings and gap analysis.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context:
@.planning/phases/02-progress-dashboard/02-03-SUMMARY.md

# Key source files for audit:
@app/api/practice/prompts/route.ts
@components/practice/usePracticeDecks.ts
@app/[locale]/practice/grammar/page.tsx
@prisma/schema.prisma
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DISCOVERY.md with practice content audit</name>
  <files>.planning/phases/03-lesson-practice-integrity/DISCOVERY.md</files>
  <action>
Create DISCOVERY.md documenting practice content sources:

1. **Practice Vocabulary System**:
   - Uses `PracticeVocabulary` table (NOT tied to curriculum)
   - Fetched via `/api/practice/prompts` - returns ALL active vocabulary
   - Falls back to `data/practice-vocabulary.json` if DB fails
   - NO filtering by user progress or completed lessons

2. **Practice Decks** (from usePracticeDecks.ts):
   - Curated deck: PracticeVocabulary table
   - Mistakes deck: localStorage wrong answers
   - SRS deck: spaced repetition due cards
   - Favorites deck: user-saved items
   - Custom decks: user-created

3. **Grammar Practice**:
   - Uses static JSON: `data/grammar-lessons.json`
   - Progress stored in localStorage (not DB)
   - NO connection to UKIM curriculum lessons
   - NO source lesson references

4. **Curriculum-Linked Models** (exist but empty):
   - `VocabularyItem` has `lessonId` field - 0 records
   - `Exercise` has `lessonId` field - 0 records
   - Schema supports lesson-linked content but not seeded

Include Mermaid diagram showing data flow.
  </action>
  <verify>cat .planning/phases/03-lesson-practice-integrity/DISCOVERY.md | head -50</verify>
  <done>DISCOVERY.md exists with complete practice audit documentation</done>
</task>

<task type="auto">
  <name>Task 2: Document practice-curriculum gap and recommended approach</name>
  <files>.planning/phases/03-lesson-practice-integrity/DISCOVERY.md</files>
  <action>
Append to DISCOVERY.md a "Gap Analysis" section:

**The Gap:**
- Practice content is completely separate from curriculum progression
- Users can be quizzed on vocabulary they've never seen in lessons
- Grammar drills don't reference which UKIM lesson teaches the concept

**Current State vs Desired State:**
| Aspect | Current | Desired |
|--------|---------|---------|
| Practice vocab source | PracticeVocabulary (generic) | VocabularyItem from completed lessons |
| Grammar drill context | Standalone | References source UKIM lesson |
| Exercise source | None | Exercise table from completed lessons |

**Recommended Approach for Phase 3:**
1. Build API infrastructure for completed-lesson content (03-02)
2. Add grammar-to-curriculum mapping (03-03)
3. Note: Full practice filtering requires vocab seeding (future work)

**Dependencies for Full Implementation:**
- VocabularyItem needs seeding from curriculum JSON
- Exercise content needs creation per lesson
- This is separate from Phase 3 scope (infrastructure focus)
  </action>
  <verify>grep -c "Gap Analysis" .planning/phases/03-lesson-practice-integrity/DISCOVERY.md</verify>
  <done>DISCOVERY.md includes gap analysis and recommended approach</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] DISCOVERY.md exists in phase directory
- [ ] Contains practice content audit (4 sections)
- [ ] Contains gap analysis with table
- [ ] Contains recommended approach
- [ ] File is well-formatted markdown
</verification>

<success_criteria>

- DISCOVERY.md created with comprehensive practice audit
- Gap between practice and curriculum clearly documented
- Recommended approach outlined for remaining Phase 3 plans
- Documentation provides context for 03-02 and 03-03
</success_criteria>

<output>
After completion, create `.planning/phases/03-lesson-practice-integrity/03-01-SUMMARY.md`
</output>
