---
phase: 42-lesson-flow-simplification
plan: 01
type: execute
---

<objective>
Simplify lesson flow from 5 sections to 4 by removing intro section, and enable free navigation to any section regardless of completion status.

Purpose: Reduce cognitive load and friction - users can jump directly to vocabulary/grammar without clicking through intro, and explore sections non-linearly.
Output: Streamlined LessonPageContentV2 with 4 sections (Dialogue, Vocabulary, Grammar, Practice) and fully unlocked navigation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./42-01-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior relevant work:
@.planning/phases/34-remaining-polish/34-02-SUMMARY.md
# Key pattern: wasPreviouslyCompleted for conditional navigation

# Key source file:
@components/learn/LessonPageContentV2.tsx

**Constraining decisions:**
- Phase 34-02: Free navigation already works for previously completed lessons (wasPreviouslyCompleted pattern)
- Phase 29-01: Vocabulary save and sort toggles integrated into LessonPageContentV2

**Current state:**
- 5 sections: intro, dialogue, vocabulary, grammar, practice
- Navigation restricted: can only navigate to past/current/completed sections (unless wasPreviouslyCompleted)
- Intro section renders lesson theme, objectives preview, and tips (lines 490-570)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove intro section and enable free navigation</name>
  <files>components/learn/LessonPageContentV2.tsx</files>
  <action>
1. Remove intro section from sections array (lines 246-254):
   - Delete the conditional block that adds 'intro' section when lesson.summary exists

2. Remove intro case from renderSectionContent switch (lines 490-570):
   - Delete the entire 'case intro:' block including the returned JSX

3. Enable free navigation by simplifying canNavigate logic (lines 931, 981):
   - Change from: `const canNavigate = wasPreviouslyCompleted || index <= currentSectionIndex || isCompleted;`
   - Change to: `const canNavigate = true;`
   - This applies to BOTH the mobile stepper (line 931) and desktop tabs (line 981)

4. Clean up unused imports if any (BookOpen is used elsewhere, keep it)

Do NOT: Remove the wasPreviouslyCompleted variable entirely - it may be used for other conditional logic. Only simplify the canNavigate check.
  </action>
  <verify>
- `npm run type-check` passes
- `npm run lint` passes
- Grep for 'intro' in LessonPageContentV2.tsx returns no section-related matches
- Grep for 'canNavigate' shows simplified logic (just `true`)
  </verify>
  <done>
- Intro section completely removed from sections array and rendering
- Navigation to any section is always enabled (canNavigate = true)
- Lessons now have 4 sections max (dialogue, vocabulary, grammar, practice)
- No TypeScript or lint errors
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Simplified lesson flow with 4 sections and free navigation</what-built>
  <how-to-verify>
    1. Run: `npm run dev`
    2. Visit: http://localhost:3000/en/lesson/[any-lesson-id]
    3. Verify sections:
       - Should see 4 section tabs max (Dialogue, Vocabulary, Grammar, Practice)
       - NO "Introduction" section should appear
    4. Test free navigation:
       - On a NEW lesson (not previously completed), click any section tab
       - ALL tabs should be clickable immediately (no grayed out future sections)
       - Mobile: tap stepper dots - all should be active
    5. Test progression still works:
       - Click "Continue" to advance through sections
       - Progress bar should update correctly
       - Completing all sections should show completion screen
    6. Test on a lesson with dialogues AND one without to ensure sections adapt
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run type-check` passes
- [ ] `npm run lint` passes
- [ ] `npm run build` succeeds
- [ ] Intro section no longer appears in any lesson
- [ ] All section tabs are clickable from the start (free navigation)
- [ ] Progress tracking still works (completing sections updates progress)
- [ ] Lesson completion flow still works (shows completion screen, can continue to next lesson)
</verification>

<success_criteria>

- Intro section completely removed
- Free navigation enabled (all section tabs clickable immediately)
- Sections reduced from 5 to 4 (dialogue, vocabulary, grammar, practice)
- No regressions in progress tracking or completion flow
- All type checks and lints pass
</success_criteria>

<output>
After completion, create `.planning/phases/42-lesson-flow-simplification/42-01-SUMMARY.md`:

# Phase 42 Plan 01: Lesson Flow Simplification Summary

**[One-liner: what changed]**

## Accomplishments

- Removed intro section from lesson flow
- Enabled free navigation to all sections
- [Other accomplishments]

## Files Created/Modified

- `components/learn/LessonPageContentV2.tsx` - [Description]

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

[Ready for Phase 43 or note any blockers]
</output>
