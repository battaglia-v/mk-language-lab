# Plan 12.1-01 Summary: UX Fixes

**Executed:** 2026-01-08
**Duration:** ~45 min (mostly translation script runtime)
**Status:** Complete

## Tasks Completed

### Task 1: Reset Progress API ✓
**Commit:** `8e9cbbb`

Created `/api/user/reset-progress` endpoint:
- Authenticates user via Clerk session
- Rate limits (5 requests/minute per IP)
- Uses Prisma transaction to atomically clear 12+ tables:
  - UserLessonProgress, ExerciseAttempt, UserQuestProgress
  - UserBadge, CurrencyTransaction, ReaderSession
  - DailyProgress, VocabularyWord, JourneyProgress
  - LeagueMembership, Notification
  - Resets GameProgress (streak, xp, level, hearts)
  - Resets Currency (gems, coins)

Updated settings page:
- Calls API when authenticated, localStorage when not
- Added loading state and error handling
- Shows success/error toast feedback

### Task 2: Remove Reader Audio ✓
**Commit:** `854ac3f`

Removed from `WordBottomSheet.tsx`:
- `Volume2` import
- `audioSupported` state
- `handlePlayAudio` callback
- Audio button from UI
- "audioUnavailable" message

Cleaned `TappableText.tsx`:
- Removed dead `handlePlayAudio` callback

### Task 3: A1 Vocabulary Translations ✓
**Commit:** `eae4e87`

Created `scripts/curriculum/translate-vocabulary.ts`:
- Uses free Google Translate API (translate.googleapis.com)
- Processes 10 words per batch with 800ms delay
- Caches translations to `.translation-cache.json`
- Handles rate limiting errors gracefully

**Translation Statistics:**
- Total A1 vocabulary items: 5,201
- Unique words translated: 2,795
- Successfully translated: 4,968 items
- Missing (API failures): 233 items
- **Coverage: 96%** (exceeds 90% threshold)

## Additional Changes (User Request)
**Commit:** `96666a3`

- Removed "Macedonian Language Corner" credits from About page
- Hidden Resources section from More navigation (commented out)

## API Costs

**None** - Used free Google Translate endpoint instead of Anthropic API

## Verification

- [x] `npm run type-check` passes
- [x] `npm run build` succeeds
- [x] Reset progress API created
- [x] Reader audio removed
- [x] A1 translations at 96% coverage

## Files Modified

| File | Change |
|------|--------|
| `app/api/user/reset-progress/route.ts` | Created - reset progress API |
| `app/[locale]/settings/page.tsx` | Updated - call API on reset |
| `components/reader/WordBottomSheet.tsx` | Removed audio functionality |
| `components/reader/TappableText.tsx` | Removed dead callback |
| `scripts/curriculum/translate-vocabulary.ts` | Created - translation script |
| `data/curriculum/structured/a1-teskoto.json` | Added translations |
| `data/curriculum/structured/.translation-cache.json` | Created - cache |
| `app/[locale]/about/page.tsx` | Removed MLC credits |
| `app/[locale]/more/page.tsx` | Hidden resources link |

## Notes

- ~100 words failed translation due to Google API 500 errors (rate limiting)
- Script can be re-run to retry failed words (not in cache)
- Free Google Translate API has no official SLA but works well for batch processing
