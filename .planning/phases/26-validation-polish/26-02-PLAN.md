---
phase: 26-validation-polish
plan: 02
type: execute
---

<objective>
Validate user journey with E2E tests for Learn → Practice → Reader flow.

Purpose: Verify the v1.3 core promise "always resume in the right place, next step obvious" with automated tests.
Output: E2E test suite covering user journey CTAs, passing test run, milestone ready for completion.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./26-02-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/TESTING.md

**Prior plan:**
@.planning/phases/26-validation-polish/26-01-SUMMARY.md

**v1.3 features to validate:**
- Phase 24: User journey CTAs connecting Learn → Practice → Reader
  - Practice results → "Read Something" CTA to Reader
  - Reader workspace → "Practice Now" CTA to Practice (when saved words > 0)
  - Reader library → "Continue your lessons" link to Learn
- Phase 25: New graded reader content (9 new stories across A1/A2/B1)

**Existing E2E tests:**
- e2e/practice.spec.ts - Practice flow tests
- e2e/reader.spec.ts - Reader tests
- e2e/lesson-runner.spec.ts - Lesson flow tests

**Key files with CTAs:**
- app/[locale]/practice/results/page.tsx - "Read Something" button (data-testid="practice-results-explore-reader")
- app/[locale]/reader/page.tsx - "Practice Now" CTA, "Continue your lessons" link
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create user journey E2E test file</name>
  <files>e2e/user-journey.spec.ts</files>
  <action>
    Create a new E2E test file that validates the user journey connections added in v1.3:

    Test cases:
    1. Practice results page shows "Read Something" CTA
       - Navigate to /en/practice/results (with mock query params)
       - Verify "Read Something" button is visible
       - Click it and verify navigation to /en/reader

    2. Reader workspace shows "Practice Now" CTA (conditional)
       - Navigate to /en/reader
       - Check workspace tab for "Practice Now" button
       - (Note: May need saved words to show - if not visible, that's expected behavior)

    3. Reader library shows "Continue your lessons" link
       - Navigate to /en/reader
       - Switch to library tab
       - Verify "Continue your lessons" or similar text link exists
       - Click and verify navigation to /en/learn

    4. New reader stories are accessible
       - Navigate to /en/reader
       - Verify at least one A1, A2, and B1 story is listed
       - Click on a story and verify it loads

    Use existing Playwright patterns from e2e/practice.spec.ts and e2e/reader.spec.ts.
  </action>
  <verify>Test file created with valid Playwright syntax, no TypeScript errors</verify>
  <done>e2e/user-journey.spec.ts exists with 4+ test cases covering v1.3 journey features</done>
</task>

<task type="auto">
  <name>Task 2: Run E2E tests and fix any failures</name>
  <files>e2e/user-journey.spec.ts</files>
  <action>
    Run the new E2E tests:
    ```
    npm run test:e2e -- e2e/user-journey.spec.ts
    ```

    If tests fail:
    - Analyze failure output
    - Fix test selectors if elements have different test IDs
    - Adjust assertions for actual page behavior
    - Re-run until all tests pass

    Also run the existing related E2E tests to ensure no regressions:
    ```
    npm run test:e2e -- e2e/practice.spec.ts e2e/reader.spec.ts
    ```
  </action>
  <verify>npm run test:e2e -- e2e/user-journey.spec.ts passes all tests</verify>
  <done>All user journey E2E tests pass, no regressions in practice/reader tests</done>
</task>

<task type="auto">
  <name>Task 3: Final validation and milestone completion</name>
  <files>.planning/STATE.md, .planning/ROADMAP.md</files>
  <action>
    Run full validation:
    1. npm run lint
    2. npm run type-check
    3. npm run build (ensure production build succeeds)

    If all pass, update project state:
    - Update STATE.md: Mark Phase 26 complete, update progress to 100%
    - Update ROADMAP.md: Mark Phase 26 as complete with date
    - Commit updates with message: "docs(26): complete v1.3 milestone validation"

    Prepare milestone completion summary for user.
  </action>
  <verify>npm run build succeeds, all checks pass, STATE.md shows v1.3 100% complete</verify>
  <done>v1.3 milestone complete, all phases 21-26 marked done, ready for next milestone</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run lint` passes
- [ ] `npm run type-check` passes
- [ ] `npm run build` succeeds
- [ ] `npm run test:e2e -- e2e/user-journey.spec.ts` passes
- [ ] STATE.md updated with Phase 26 complete
- [ ] ROADMAP.md updated with Phase 26 completion date
</verification>

<success_criteria>

- E2E tests validate user journey CTAs work
- New reader stories accessible and rendering
- Production build passes
- v1.3 milestone marked complete
- Core promise validated: "always resume in the right place, next step obvious"
</success_criteria>

<output>
After completion, create `.planning/phases/26-validation-polish/26-02-SUMMARY.md`:

# Phase 26 Plan 02: User Journey E2E Validation Summary

**[One-liner - e.g., "v1.3 milestone validated with E2E tests covering Learn → Practice → Reader flow"]**

## Accomplishments

- [E2E test coverage for v1.3 features]
- [Build verification]
- [Milestone completion]

## Files Created/Modified

- `e2e/user-journey.spec.ts` - New E2E test file
- `.planning/STATE.md` - Updated to mark milestone complete
- `.planning/ROADMAP.md` - Updated phase status

## Commits

- [commit hash] message

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Milestone Complete

v1.3 Content Quality & User Journey shipped.

**Next milestone:** TBD (user to decide next focus)
</output>
