---
phase: 18.1-lesson-quality-audit
plan: 02
type: execute
---

<objective>
Comprehensive dark mode audit to find and fix remaining hardcoded colors across the codebase.

Purpose: Ensure 100% dark mode compliance (currently at ~40% per audit). Fix all remaining hardcoded colors that don't adapt to theme changes.
Output: All lesson/UI components using theme-aware color classes.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/globals.css
@components/learn/LessonSection.tsx

**Prior fixes applied:**
- DailyLessons.tsx: text-white → text-foreground
- Prompt.tsx: text-slate-50 → text-foreground, mastery colors with dark variants
- ConjugationTable.tsx: tense colors with dark variants

**Pattern to follow:**
- Hardcoded: text-white, text-slate-*, text-gray-*, bg-white, bg-black, color: '#...'
- Theme-aware: text-foreground, text-muted-foreground, bg-background, bg-card, bg-muted

**Search patterns:**
- `text-white` (should be text-foreground or text-primary-foreground)
- `text-slate-` without `dark:` variant
- `text-gray-` without `dark:` variant
- `bg-white` (should be bg-background or bg-card)
- `color:` in style props
- `backgroundColor:` in style props
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scan codebase for hardcoded colors</name>
  <files>N/A (analysis only)</files>
  <action>
    Run comprehensive grep searches to identify all hardcoded color instances:

    ```bash
    # Text colors without dark variants
    grep -r "text-white" --include="*.tsx" components/ app/ | grep -v "dark:"
    grep -r "text-slate-" --include="*.tsx" components/ app/ | grep -v "dark:"
    grep -r "text-gray-" --include="*.tsx" components/ app/ | grep -v "dark:"

    # Background colors
    grep -r "bg-white" --include="*.tsx" components/ app/ | grep -v "dark:"

    # Inline styles
    grep -r "color:" --include="*.tsx" components/ app/
    grep -r "backgroundColor:" --include="*.tsx" components/ app/
    ```

    Document each finding with file path, line number, and suggested fix.
  </action>
  <verify>Scan completes, findings documented</verify>
  <done>List of all hardcoded color instances ready for fixing</done>
</task>

<task type="auto">
  <name>Task 2: Fix hardcoded colors in lesson components</name>
  <files>components/learn/*.tsx (as identified)</files>
  <action>
    Apply fixes to all lesson-related components identified in Task 1.

    Replacement rules:
    - `text-white` → `text-foreground` or `text-primary-foreground` (contextual)
    - `text-slate-300/400/500` → `text-muted-foreground`
    - `text-slate-600/700/800` → `text-foreground`
    - `bg-white` → `bg-background` or `bg-card`
    - Inline `color:` → Remove and use Tailwind class
    - `text-{color}-600` → Add `dark:text-{color}-400` variant

    Focus on components in /components/learn/ directory.
  </action>
  <verify>
    - `npm run type-check` passes
    - No remaining hardcoded colors in learn components (re-run grep)
  </verify>
  <done>All lesson components use theme-aware colors</done>
</task>

<task type="auto">
  <name>Task 3: Fix hardcoded colors in app pages and UI components</name>
  <files>app/**/*.tsx, components/ui/*.tsx (as identified)</files>
  <action>
    Apply fixes to remaining app pages and UI components.

    Same replacement rules as Task 2.

    Check commonly missed areas:
    - Modal/dialog backgrounds
    - Loading states
    - Error states
    - Badge/tag colors
    - Card borders and backgrounds
  </action>
  <verify>
    - `npm run type-check` passes
    - `npm run lint` passes (0 errors)
    - Re-run grep scans show minimal/no remaining issues
  </verify>
  <done>Codebase at 100% dark mode compliance for color usage</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Comprehensive scan completed
- [ ] All lesson components fixed
- [ ] All app pages/UI components fixed
- [ ] `npm run type-check` passes
- [ ] `npm run lint` passes
- [ ] Re-scan shows no remaining hardcoded colors
</verification>

<success_criteria>
- Zero hardcoded text-white/text-slate without dark variants in lesson components
- Zero inline color styles in JSX
- All color classes use theme-aware tokens or have dark: variants
- Type check and lint pass
</success_criteria>

<output>
After completion, create `.planning/phases/18.1-lesson-quality-audit/18.1-02-SUMMARY.md`
</output>
