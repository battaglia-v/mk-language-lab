---
phase: 07-validation
plan: 01
type: plan
---

# Plan: Update Playwright Tests for New UX

## Objective

Update E2E tests to reflect the beta UX changes from Phases 1-6, ensuring tests don't reintroduce removed features or fail on intentional changes.

## Execution Context

- Phase 6 hid pronunciation/speaking features (page shows "Coming Soon")
- ModeTileGrid defaults to: grammar, word-sprint, vocabulary (no pronunciation)
- Tests must validate current intended UX, not old behavior

## Context

**Key tests needing updates:**

1. `e2e/pronunciation-practice.spec.ts` (155 lines)
   - Tests pronunciation page which NOW shows "Coming Soon" message
   - Current tests expect: session cards, "How It Works" section, recording UI
   - Should test: "Coming Soon" message visible, back navigation works

2. `e2e/practice.spec.ts` (287 lines)
   - Lines 20-24: `should display pronunciation practice mode card` - WILL FAIL
   - Lines 32-37: `should navigate to pronunciation practice` - WILL FAIL
   - Remove or update these tests to reflect hidden pronunciation

3. `e2e/mobile-practice-flow.spec.ts` (147 lines)
   - Lines 40-42: Expects pronunciation link to be visible - WILL FAIL
   - Update to NOT expect pronunciation in practice hub

**Already correct (no changes needed):**
- `e2e/sidebar-nav.spec.ts` - Doesn't test pronunciation routes
- `e2e/grammar-practice.spec.ts` - Grammar still active
- `e2e/word-sprint.spec.ts` - Word Sprint still active

## Tasks

### Task 1: Update pronunciation-practice.spec.ts for Coming Soon state
**Files:** `e2e/pronunciation-practice.spec.ts`

Replace the full test suite with a minimal "Coming Soon" validation:
- Keep one test that visits `/en/practice/pronunciation`
- Assert "Coming Soon" message is visible
- Assert back navigation to `/practice` works
- Remove all session card, recording, and flow tests (feature is disabled)

### Task 2: Remove pronunciation tests from practice.spec.ts
**Files:** `e2e/practice.spec.ts`

- Delete test: `should display pronunciation practice mode card` (lines 20-24)
- Delete test: `should navigate to pronunciation practice` (lines 32-37)
- Keep all other tests (grammar card, vocabulary, etc.)

### Task 3: Update mobile-practice-flow.spec.ts
**Files:** `e2e/mobile-practice-flow.spec.ts`

- Remove assertion on line 41-42 expecting pronunciation link
- Test should validate practice hub loads with available modes (word-sprint, grammar, vocabulary)
- Update test name if needed to reflect current scope

### Task 4: Run full E2E test suite
**Command:** `npx playwright test --reporter=list`

- Run all tests to verify no other pronunciation-related failures
- Fix any additional failures found
- Document any tests that were unexpectedly passing/failing

## Verification

- [ ] `npx playwright test e2e/pronunciation-practice.spec.ts` passes
- [ ] `npx playwright test e2e/practice.spec.ts` passes
- [ ] `npx playwright test e2e/mobile-practice-flow.spec.ts` passes
- [ ] No tests reference pronunciation as an expected visible feature
- [ ] `npm run type-check` passes
- [ ] `npm run lint` passes

## Success Criteria

- All E2E tests pass without testing removed features
- Tests validate the intended beta UX (pronunciation hidden)
- No false positives from stale test expectations

## Output

- Updated `e2e/pronunciation-practice.spec.ts`
- Updated `e2e/practice.spec.ts`
- Updated `e2e/mobile-practice-flow.spec.ts`
- Test run summary in SUMMARY.md
