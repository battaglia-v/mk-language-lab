---
phase: 66-profile-polish
plan: 01
type: execute
---

<objective>
Profile screen with user stats and settings.

Purpose: Give users a view of their progress and account management.
Output: Enhanced profile tab with stats, settings link, and sign out.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/65-translator/65-01-SUMMARY.md

# Web profile patterns:
@components/profile/ProfileDashboard.tsx
@components/profile/StatsSection.tsx

# Mobile auth store:
@apps/mobile/store/auth.ts

# Mobile API patterns:
@apps/mobile/lib/api.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create profile API integration</name>
  <files>apps/mobile/lib/profile.ts</files>
  <action>
Create profile API functions to fetch user stats.

```typescript
export type ProfileStats = {
  xpTotal: number;
  xpWeekly: number;
  streakDays: number;
  lessonsCompleted: number;
  practiceSessionsCompleted: number;
};

export async function fetchProfileStats(): Promise<ProfileStats>;
```

Use existing `/api/mobile/profile` endpoint (create if needed).
Return mock data if endpoint doesn't exist yet:
```typescript
{
  xpTotal: 0,
  xpWeekly: 0,
  streakDays: 0,
  lessonsCompleted: 0,
  practiceSessionsCompleted: 0,
}
```
  </action>
  <verify>Profile API function returns data</verify>
  <done>Profile API integration complete</done>
</task>

<task type="auto">
  <name>Task 2: Enhance profile screen</name>
  <files>apps/mobile/app/(tabs)/profile.tsx</files>
  <action>
Enhance the existing profile screen with stats and settings.

UI structure:
- Header with user avatar placeholder (initials circle)
- User email
- Stats cards row:
  - XP Total (emerald accent)
  - Streak Days (orange accent)
  - Lessons (blue accent)
- Settings button (gear icon) → navigates to /settings
- Sign Out button (red, at bottom)

Stats cards use same glass-card style as other screens.
Pull-to-refresh to reload stats.
Loading state while fetching.

Use existing color scheme (#06060b background, #f6d83b accent).
  </action>
  <verify>Profile shows stats from API</verify>
  <done>Enhanced profile screen complete</done>
</task>

<task type="auto">
  <name>Task 3: Create settings screen</name>
  <files>apps/mobile/app/settings.tsx</files>
  <action>
Create settings screen accessible from profile.

Settings options:
- Account section:
  - Email (display only)
  - Change Password → link to web (WebBrowser.openBrowserAsync)
- App section:
  - Version number (from app.config.ts)
  - Clear cache button (clears AsyncStorage except auth)
- About section:
  - Privacy Policy → link to web
  - Terms of Service → link to web

Use Stack navigation for settings screen (add to app/_layout.tsx if needed).
Back button returns to profile tab.

Style matches app theme (dark background, white text).
  </action>
  <verify>Settings opens and links work</verify>
  <done>Settings screen complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run type-check` passes in apps/mobile
- [ ] Profile shows user email and stats
- [ ] Settings screen opens from profile
- [ ] Sign out returns to sign-in screen
- [ ] External links open in browser
</verification>

<success_criteria>

- Profile screen with stats (XP, streak, lessons)
- Settings screen with account and app info
- Sign out flow works correctly
- Phase 66-01 Profile Screen complete

</success_criteria>

<output>
After completion, create `.planning/phases/66-profile-polish/66-01-SUMMARY.md`
</output>
