---
phase: 32-content-polish
plan: 02
type: execute
---

<objective>
Move alphabet to A1 curriculum start and standardize translation UX patterns.

Purpose: Ensure new learners start with alphabet foundations, and translation interactions are consistent throughout the app.
Output: Alphabet lesson integrated at A1 position 0, unified translation result display patterns.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/32-content-polish/32-01-SUMMARY.md
@lib/learn/curriculum-path.ts
@lib/learn/starter-path.ts
@app/[locale]/learn/page.tsx
@app/[locale]/translate/page.tsx
@components/tools/ToolsPageClient.tsx
@messages/en.json
@messages/mk.json

**Phase Context:**
- A1 curriculum is database-driven via curriculum-path.ts querying ukim-a1 journey
- Alphabet lesson exists at /learn/lessons/alphabet but isn't part of database curriculum
- starter-path.ts has hardcoded alphabet as first node, but this path isn't primary anymore
- Translation page has modern UX with result bubble, copy, save, listen actions
- Tools page combines Translate + Analyze with toggle

**Tech stack available:**
- Prisma for curriculum database
- LessonPath/LessonNode types for curriculum structure
- SegmentedControl, BottomSheet UI components

**Constraining decisions:**
- Phase 30: Vocabulary display established inline annotation patterns
- Phase 31: Session persistence uses localStorage
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate alphabet into A1 curriculum start</name>
  <files>lib/learn/curriculum-path.ts, app/[locale]/learn/lessons/alphabet/page.tsx</files>
  <action>
The goal is to ensure alphabet appears as the first lesson in A1 curriculum path.

Option A (Preferred - Minimal DB changes):
Modify getCurriculumPath() in curriculum-path.ts to prepend the alphabet lesson as a synthetic node before database lessons:

```typescript
// After fetching modules, prepend alphabet as lesson 0
const alphabetNode: LessonNode = {
  id: 'alphabet',
  type: 'lesson',
  title: 'The Alphabet',
  titleMk: 'Азбуката',
  description: 'Learn the Cyrillic alphabet and basic pronunciation',
  status: completedLessonIds.has('alphabet') ? 'completed' : 'available',
  xpReward: 20,
  href: '/learn/lessons/alphabet',
  contentId: 'alphabet',
};

// Only for A1 (ukim-a1), prepend alphabet
if (journeyId === 'ukim-a1') {
  nodes.unshift(alphabetNode);
}
```

This keeps alphabet as a standalone page while integrating it into the A1 progression flow.

Update the status calculation logic to handle this prepended node correctly:
- If alphabet is not completed, it should be 'available' and all DB lessons should be 'locked'
- If alphabet is completed, normal progression logic applies

Also update the path totals to include alphabet in the count.
  </action>
  <verify>
npm run type-check
# Manual verification: Navigate to /en/learn and verify alphabet appears first in A1 path
  </verify>
  <done>
- Alphabet lesson appears as first node in A1 curriculum path
- Progression logic respects alphabet completion status
- totalCount includes alphabet lesson
- No TypeScript errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Standardize translation result UX patterns</name>
  <files>components/reader/ReaderWorkspace.tsx, components/practice/PracticeSession.tsx</files>
  <action>
Audit translation result display across the app and ensure consistent patterns:

1. Primary translation page (/translate) has the gold standard:
   - Result in bordered bubble with primary/5 background
   - Actions: Copy, Save, Listen in consistent order
   - animate-feedback-correct animation on result display

2. Check other places with translation results:
   - Reader workspace (word lookup results)
   - Practice session (word hints/translations)
   - Any inline translation displays

3. For each inconsistent location, update to match the pattern:
   - Use rounded-2xl border border-primary/30 bg-primary/5 styling
   - Include Copy button with same icon/behavior
   - Use consistent animation class if appropriate

4. If reader workspace shows word translations differently, consider:
   - Using same result bubble styling for popup/tooltip translations
   - Ensuring copy functionality works consistently
   - Matching the primary to-amber gradient for action buttons if applicable

Note: Don't over-engineer - only standardize if there's clear inconsistency. If other translation displays are already consistent, document that finding.
  </action>
  <verify>
grep -r "border-primary/30\|bg-primary/5\|feedback-correct" components/ | head -10
npm run type-check
  </verify>
  <done>
- Translation result display patterns are consistent across app
- Copy functionality works the same way everywhere
- Styling matches primary translate page pattern
- Documentation of what was standardized (or finding that it was already consistent)
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Alphabet integration and translation UX standardization</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Navigate to /en/learn
    3. Verify: A1 Foundations shows "The Alphabet" as the first lesson
    4. Verify: Clicking alphabet leads to /learn/lessons/alphabet
    5. Navigate to /en/translate, enter text, translate
    6. Verify: Result appears in styled bubble with Copy/Save/Listen
    7. Navigate to /en/reader and select a text, click a word
    8. Compare: Translation popup styling should be consistent
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run type-check` passes
- [ ] `npm run lint` passes (or only pre-existing warnings)
- [ ] Alphabet appears first in A1 path
- [ ] Translation UX is consistent or documented as already consistent
</verification>

<success_criteria>

- Alphabet integrated as A1 lesson 0 with proper progression tracking
- Translation result patterns audited and standardized where needed
- Human verified the visual integration
- Phase 32 complete
</success_criteria>

<output>
After completion, create `.planning/phases/32-content-polish/32-02-SUMMARY.md`:

# Phase 32 Plan 02: Alphabet & Translation UX Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `lib/learn/curriculum-path.ts` - Alphabet integration
- [Other files]

## Decisions Made

[Any decisions, or "None"]

## Issues Encountered

[Any issues, or "None"]

## Next Phase Readiness

Phase 32 complete. v1.4 milestone ready for completion.
</output>
