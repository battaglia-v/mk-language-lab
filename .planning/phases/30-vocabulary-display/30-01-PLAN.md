---
phase: 30-vocabulary-display
plan: 01
type: execute
---

<objective>
Add inline gender annotations to vocabulary cards with color coding and definite article display.

Purpose: Make grammatical gender immediately visible for nouns and adjectives so learners recognize patterns at a glance.
Output: Enhanced vocabulary cards showing gender badges with color coding, plus definite article forms for nouns.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-vocabulary-display/30-CONTEXT.md

# Prior phase context
@.planning/phases/29-lesson-enhancements/29-02-SUMMARY.md

# Key files
@components/learn/EnhancedVocabularyCard.tsx
@components/learn/LessonPageContentV2.tsx
@messages/en.json
@messages/mk.json

**Tech stack available:** Next.js 16 App Router, Tailwind CSS, shadcn/ui
**Established patterns:** POS_COLORS color mapping, Badge component styling with dark mode
**Constraining decisions:**
- Phase 29: Vocabulary quick action CTA placed in vocabulary section
- Color-coded POS system already implemented with blue=noun, green=verb, purple=adjective
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add gender color coding and inline annotations</name>
  <files>components/learn/EnhancedVocabularyCard.tsx</files>
  <action>
    1. Create GENDER_COLORS mapping with distinct colors for masculine/feminine/neuter:
       - masculine: blue tones (similar to noun color but distinct badge)
       - feminine: pink/rose tones (warm, distinct from purple adjective)
       - neuter: amber/gold tones (neutral, distinct from both)

    2. Modify compact mode rendering to show gender as a separate small badge next to the POS badge when item.gender exists:
       - Display as "m." / "f." / "n." abbreviation using existing GENDER_LABELS
       - Use GENDER_COLORS for distinct color coding
       - Position inline after the POS badge (not inside it)

    3. Update full mode to also show the separate gender badge inline

    4. For adjectives, extract gender from translation text if not in gender field:
       - Check if englishText contains "(masculine)", "(feminine)", or "(neuter)"
       - Parse and use as fallback when item.gender is null

    5. DO NOT change the core layout structure or add new props. Keep changes minimal and focused on gender display enhancement.
  </action>
  <verify>
    npm run type-check passes
    npm run lint passes
  </verify>
  <done>
    Gender badges render inline with distinct colors (blue=m, pink=f, amber=n) when gender data exists or can be parsed from translation.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add definite article display for nouns</name>
  <files>components/learn/EnhancedVocabularyCard.tsx</files>
  <action>
    1. Create a helper function getDefiniteForm(macedonianText: string, gender: string) that generates the definite article form:
       - Macedonian definite suffixes: masculine (-от/-ов/-он), feminine (-та/-ва/-на), neuter (-то/-во/-но)
       - For simplicity, use the most common form: -от (masc), -та (fem), -то (neut)
       - Only apply to nouns (check partOfSpeech === 'noun')

    2. Display definite form below or after the Macedonian word in a subtle style:
       - Show as "(def: столот)" or "→ столот" format
       - Use text-muted-foreground and smaller font size
       - Only show if partOfSpeech is "noun" and gender exists

    3. Position the definite article inline with the word display (not in the badge area)

    4. DO NOT add this for verbs, adjectives, or other parts of speech. Definite articles apply to nouns only.
  </action>
  <verify>
    npm run type-check passes
    npm run lint passes
    Manual check: Visit a lesson page and verify nouns show definite forms
  </verify>
  <done>
    Nouns display their definite article form (e.g., стол → столот) inline with the word.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Gender color coding and definite article display for vocabulary cards</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/en/lesson/MODULE_ID/LESSON_ID (any A1 lesson)
    3. Navigate to the Vocabulary section
    4. Verify:
       - Nouns show a gender badge (m./f./n.) with distinct color (blue/pink/amber)
       - Adjectives show gender when present
       - Nouns show definite article form (e.g., "→ столот")
       - Colors are distinct and readable in both light and dark mode
       - Layout remains clean and not cluttered
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run type-check` passes
- [ ] `npm run lint` passes
- [ ] Gender badges display with correct colors
- [ ] Definite articles display for nouns only
- [ ] Both light and dark modes work correctly
</verification>

<success_criteria>

- Gender annotations visible inline with distinct color coding
- Definite article forms shown for nouns
- No TypeScript errors
- Clean, uncluttered card design maintained
</success_criteria>

<output>
After completion, create `.planning/phases/30-vocabulary-display/30-01-SUMMARY.md`
</output>
