---
phase: 28-navigation-overhaul
plan: 02
type: execute
---

<objective>
Merge the Translate and Analyzer tools into a single "Tools" view with a toggle between modes, reducing navigation complexity.

Purpose: Users currently navigate to separate pages for translation (/translate) and text analysis (/reader/analyze). Combining them into a single view with mode toggle improves discoverability and reduces cognitive load.
Output: Single /tools page with Translate/Analyze toggle, redirect from old paths, updated navigation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./28-02-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/28-navigation-overhaul/28-01-SUMMARY.md

# Key files:
@app/[locale]/translate/page.tsx
@app/[locale]/reader/analyze/page.tsx
@app/[locale]/lab/page.tsx
@components/shell/navItems.ts
@messages/en.json
@messages/mk.json

**Tech stack available:** Next.js App Router, next-intl, lucide-react icons, Tailwind CSS
**Established patterns:** Tabs via segmented controls, mode state via URL params or useState
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create unified Tools page with Translate/Analyze toggle</name>
  <files>app/[locale]/tools/page.tsx, components/tools/ToolsPageClient.tsx</files>
  <action>
1. Create app/[locale]/tools/page.tsx as server component that:
   - Loads translations for both translate and analyzer namespaces
   - Passes initial mode from ?mode=translate or ?mode=analyze URL param (default: translate)
   - Renders ToolsPageClient component

2. Create components/tools/ToolsPageClient.tsx as client component:
   - Two-tab segmented control at top: "Translate" | "Analyze"
   - State for activeMode: 'translate' | 'analyze'
   - When mode changes, update URL param via router.replace (shallow)
   - Render the appropriate tool based on mode:
     - translate: Import and render TranslatorTool from existing translate page
     - analyze: Import and render AnalyzerTool from existing analyze page

3. Extract the core functionality from existing pages into reusable components if not already:
   - The translate page likely has inline implementation - extract to components/translate/TranslatorTool.tsx
   - The analyze page likely has inline implementation - extract to components/reader/AnalyzerTool.tsx

4. Add i18n keys in messages/en.json and messages/mk.json:
   - "tools.title": "Language Tools" / "Јазични Алатки"
   - "tools.translateTab": "Translate" / "Преведи"
   - "tools.analyzeTab": "Analyze" / "Анализирај"

Style the toggle to match existing design tokens (bg-muted, rounded-lg pills).
  </action>
  <verify>
npm run type-check passes
Navigate to /en/tools shows unified view with toggle
Toggle switches between Translate and Analyze modes
URL param updates when switching modes
  </verify>
  <done>Unified Tools page created with working Translate/Analyze toggle, core logic extracted to reusable components</done>
</task>

<task type="auto">
  <name>Task 2: Update navigation and add redirects</name>
  <files>components/shell/navItems.ts, middleware.ts, app/[locale]/translate/page.tsx, app/[locale]/reader/analyze/page.tsx</files>
  <action>
1. Update navItems.ts:
   - Change "translate" item to "tools"
   - Path: "/tools"
   - Icon: Keep Languages or use Wrench
   - Update id to "tools"

2. Add redirects for old paths (in middleware.ts or via redirect files):
   - /translate → /tools?mode=translate
   - /reader/analyze → /tools?mode=analyze

3. Update the old pages to use Next.js redirects:
   - app/[locale]/translate/page.tsx: Use redirect() to /tools?mode=translate
   - app/[locale]/reader/analyze/page.tsx: Use redirect() to /tools?mode=analyze

4. Update i18n keys in nav namespace:
   - "tools": "Tools" / "Алатки"

5. Search for hardcoded /translate or /reader/analyze links in components and update to /tools
  </action>
  <verify>
npm run type-check passes
npm run lint passes
Bottom nav shows "Tools" instead of "Translate"
Navigating to /translate redirects to /tools?mode=translate
Navigating to /reader/analyze redirects to /tools?mode=analyze
  </verify>
  <done>Navigation updated to show "Tools", old paths redirect correctly, all internal links updated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run type-check` passes
- [ ] `npm run lint` passes
- [ ] `/tools` page shows unified view with Translate/Analyze toggle
- [ ] Toggle state persists in URL params
- [ ] Old `/translate` path redirects to `/tools?mode=translate`
- [ ] Old `/reader/analyze` path redirects to `/tools?mode=analyze`
- [ ] Bottom nav shows "Tools" tab
- [ ] No broken links to old paths
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Translate and Analyze tools accessible from single page
- Mode toggle works and updates URL
- Backward-compatible redirects in place
- Navigation simplified
</success_criteria>

<output>
After completion, create `.planning/phases/28-navigation-overhaul/28-02-SUMMARY.md`
</output>
