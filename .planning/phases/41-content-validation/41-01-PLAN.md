---
phase: 41-content-validation
plan: 01
type: execute
---

<objective>
Validate v1.6 Reader Overhaul milestone with E2E tests and final polish.

Purpose: Ensure the complete reader experience works reliably before shipping v1.6.
Output: Passing E2E tests, any critical bugs fixed, milestone ready to ship.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/40-discovery-navigation/40-01-SUMMARY.md

**v1.6 features to validate:**
- Phase 36: 12 graded readers wired (A1/A2/B1)
- Phase 37: Tap-to-translate with pre-analyzed word data
- Phase 38: Save words to glossary from reader
- Phase 39: Reading progress tracking with library card status
- Phase 40: Topic filtering, sort options, Continue Reading card

**Tech stack:** Next.js 16, Playwright E2E tests
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reader E2E test suite</name>
  <files>e2e/reader.spec.ts</files>
  <action>
Create comprehensive E2E tests for the Reader section:

1. Library browsing tests:
   - Navigate to /reader
   - Verify graded readers display (12 stories)
   - Test difficulty filter (A1/A2/B1)
   - Test topic filter (Family, Daily Life, Food, Travel, Culture)
   - Test sort dropdown (Default, Difficulty, Reading Time, My Progress)
   - Test search functionality
   - Verify story cards show correct metadata

2. Reading experience tests:
   - Open a graded reader story
   - Verify text content loads
   - Test tap-to-translate (click word, verify popup)
   - Test "Add to glossary" from word popup
   - Verify reading progress saves (scroll, check localStorage)

3. Progress and navigation tests:
   - Start reading a story
   - Navigate away and return
   - Verify "Continue Reading" card appears
   - Verify progress bar on library card
   - Complete a story and verify "completed" state

Use existing E2E patterns from e2e/ directory.
  </action>
  <verify>
- All new E2E tests pass
- Tests cover critical user journeys
- No flaky tests
  </verify>
  <done>Reader E2E tests passing, covering library, reading, and progress features</done>
</task>

<task type="auto">
  <name>Task 2: Fix any bugs found during testing</name>
  <files>TBD based on findings</files>
  <action>
Run the full E2E suite and fix any bugs discovered:

1. Run `npm run test:e2e`
2. Document any failures
3. Fix critical bugs that block user journeys
4. Re-run tests to verify fixes

If no bugs found, mark task complete with "No bugs found" note.
  </action>
  <verify>
- All E2E tests passing
- No regressions in existing tests
  </verify>
  <done>All bugs fixed (or none found), full E2E suite passing</done>
</task>

<task type="auto">
  <name>Task 3: Update STATE and ROADMAP for milestone completion</name>
  <files>.planning/STATE.md, .planning/ROADMAP.md</files>
  <action>
1. Update STATE.md:
   - Mark Phase 41 complete
   - Update progress to 100%
   - Note milestone ready to ship

2. Update ROADMAP.md:
   - Mark Phase 41 complete with plan count
   - Update progress table

3. Run final checks:
   - `npm run type-check`
   - `npm run lint`
   - `npm run test`
  </action>
  <verify>
- STATE.md shows Phase 41 complete
- ROADMAP.md shows all v1.6 phases complete
- All checks pass
  </verify>
  <done>v1.6 milestone marked complete, ready for /gsd:complete-milestone</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run type-check` passes
- [ ] `npm run lint` passes
- [ ] `npm run test` passes
- [ ] `npm run test:e2e` passes (including new reader tests)
- [ ] Reader library browsing works (filters, sort, search)
- [ ] Tap-to-translate works in stories
- [ ] Reading progress saves and displays correctly
</verification>

<success_criteria>

- E2E tests cover all v1.6 reader features
- All tests passing
- No critical bugs remaining
- v1.6 milestone ready to ship
</success_criteria>

<output>
After completion, create `.planning/phases/41-content-validation/41-01-SUMMARY.md` following frontmatter template with:
- subsystem: reader, e2e
- tags: [validation, e2e, milestone]
- key-files listing test files created
- key-decisions about test coverage
</output>
