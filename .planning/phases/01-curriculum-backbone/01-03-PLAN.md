---
phase: 01-curriculum-backbone
plan: 03
type: execute
---

<objective>
Extract and structure A2 curriculum from Лозје textbook.

Purpose: Apply extraction patterns established in A1 to the intermediate-level textbook.
Output: JSON file with A2 lessons, vocabulary, grammar notes ready for database import.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-curriculum-backbone/01-RESEARCH.md
@.planning/phases/01-curriculum-backbone/01-02-SUMMARY.md (after 01-02 completes)
@scripts/curriculum/extract-pdf.ts
@scripts/curriculum/parse-a1-structure.ts

**Depends on:** Plan 01-02 complete (A1 extraction patterns established)
**Lessons learned:** Apply structure detection patterns from A1 parsing
**Target models:** Module, CurriculumLesson, VocabularyItem, GrammarNote
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract raw text with positions from Лозје PDF</name>
  <files>scripts/curriculum/extract-a2.ts, data/curriculum/extracted/a2-raw.json</files>
  <action>
1. Create extract-a2.ts (copy pattern from extract-a1.ts):
   - Load data/curriculum/raw/a2-lozje.pdf
   - Use extractPdfText() from extract-pdf.ts
   - Save to data/curriculum/extracted/a2-raw.json
   - Log extraction stats and Cyrillic validation
2. Run extraction: `npx tsx scripts/curriculum/extract-a2.ts`
3. Validate Macedonian characters present

Apply same extraction approach as A1. Expect similar PDF structure from same publisher.
  </action>
  <verify>cat data/curriculum/extracted/a2-raw.json | head -100 shows Cyrillic text</verify>
  <done>Raw A2 extraction complete with valid Cyrillic</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Raw text extraction from Лозје A2 textbook PDF</what-built>
  <how-to-verify>
    1. Open: data/curriculum/extracted/a2-raw.json
    2. Compare: Structure similar to A1? (Same publisher, expect consistency)
    3. Check: Cyrillic displays correctly
    4. Check: Can identify chapter headers by fontSize
    5. Note: Any differences from A1 structure that need handling
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe structural differences to handle</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Parse structure into curriculum JSON</name>
  <files>scripts/curriculum/parse-a2-structure.ts, data/curriculum/structured/a2-lozje.json</files>
  <action>
1. Create parse-a2-structure.ts:
   - Reuse parsing logic from parse-a1-structure.ts
   - Adjust thresholds if A2 has different formatting
   - Map to structure with journeyId: "ukim-a2"
   - Extract chapters, lessons, vocabulary, grammar
2. Run parsing: `npx tsx scripts/curriculum/parse-a2-structure.ts`
3. Output to data/curriculum/structured/a2-lozje.json

If A2 structure differs significantly from A1, document differences in SUMMARY.md for future reference.
  </action>
  <verify>cat data/curriculum/structured/a2-lozje.json | jq '.chapters | length' shows chapters > 0</verify>
  <done>Structured A2 JSON exists with chapters and content identified</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] data/curriculum/extracted/a2-raw.json exists with valid Cyrillic
- [ ] data/curriculum/structured/a2-lozje.json exists with chapter structure
- [ ] JSON structure matches A1 format (consistent schema)
- [ ] Human verified extraction quality
</verification>

<success_criteria>
- All tasks completed
- Checkpoint approved
- A2 curriculum captured in structured JSON
- Both A1 and A2 ready for database import
</success_criteria>

<output>
After completion, create `.planning/phases/01-curriculum-backbone/01-03-SUMMARY.md`
</output>
