---
phase: 12-a2-content-population
plan: 01
type: execute
---

<objective>
Fill A2 vocabulary arrays and grammar notes from Лозје PDF with quality content.

Purpose: Apply proven A1 quality patterns (stop word filtering + grammar templates) to A2 content.
Output: Quality A2 curriculum with filtered vocabulary and substantive grammar explanations/examples.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior related work (same patterns):
@.planning/phases/10-a1-vocabulary-extraction/10-01-SUMMARY.md
@.planning/phases/11-a1-grammar-content/11-01-SUMMARY.md

# Reusable components:
@scripts/curriculum/vocabulary-patterns.ts - MACEDONIAN_STOP_WORDS, isValidVocabularyWord()
@scripts/curriculum/a1-grammar-content.ts - Template structure to follow

# Target files:
@scripts/curriculum/parse-a2-structure.ts - Parser to enhance
@data/curriculum/structured/a2-lozje.json - Output to regenerate

**Current A2 State (from audit):**
- Vocabulary: 9,905 items (needs stop word filtering)
- Grammar: 46 notes, 28 with <3 examples, 2 with short explanations
- 8 lessons with 35 grammar topics from TOC

**A2 Grammar Topics (from parse-a2-structure.ts LESSON_GRAMMAR):**
- Lesson 1: Present tense, definite articles, geographical adjectives, questions
- Lesson 2: Da-construction, ordinal numerals, object pronouns, future tense, adverbs, prepositions
- Lesson 3: Imperative, L-form, conditional, modal expressions
- Lesson 4: Imperfect, aorist, verbal adjective, sum-construction, verbal noun, indirect object, real conditional
- Lesson 5: Perfect tense, adverbs, particles
- Lesson 6: Future-in-past, unreal conditional, ima-construction, interjections
- Lesson 7: Possible conditional, verbal adverb, passive sentences
- Lesson 8: Pluperfect, conjunctions, reported speech

**Established patterns to follow:**
- Grammar template structure: title, titleVariants, explanation, examples (from a1-grammar-content.ts)
- Stop word filtering: MACEDONIAN_STOP_WORDS + isValidVocabularyWord() (from vocabulary-patterns.ts)
- Parser enhancement: enhanceWithTemplate() function (from parse-a1-structure.ts)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create A2 grammar content templates</name>
  <files>scripts/curriculum/a2-grammar-content.ts</files>
  <action>
Create A2_GRAMMAR_CONTENT array with templates for all 35 grammar topics.

Follow exact structure from a1-grammar-content.ts:
- GrammarTemplate interface with title, titleVariants, explanation, examples
- Each template: 50-150 char English explanation + 5-10 Macedonian example sentences

A2 is more advanced than A1 - cover verb tenses (present, future, imperative, imperfect, aorist, perfect, pluperfect, future-in-past), conditionals (real, unreal, possible), object pronouns, verbal forms (adjective, noun, adverb), passive, reported speech.

Example structure for one topic:
```typescript
{
  title: 'Идно време (футур)',
  titleVariants: ['идно време', 'футур', 'future tense', 'ќе'],
  explanation: 'Future tense formed with particle "ќе" + present tense verb. Used for future actions, predictions, and intentions. "Ќе" remains unchanged for all persons.',
  examples: [
    'Јас ќе одам во училиште.',
    'Ти ќе учиш македонски.',
    'Тој ќе работи утре.',
    'Ние ќе патуваме во Охрид.',
    'Вие ќе дојдете на забава.',
  ],
}
```

Export A2_GRAMMAR_CONTENT for use in parser.
  </action>
  <verify>npx tsc --noEmit scripts/curriculum/a2-grammar-content.ts</verify>
  <done>35 grammar templates created with English explanations and Macedonian examples, file compiles without errors</done>
</task>

<task type="auto">
  <name>Task 2: Update A2 parser with template fallback and vocabulary filtering</name>
  <files>scripts/curriculum/parse-a2-structure.ts</files>
  <action>
Update parse-a2-structure.ts following the A1 parser pattern:

1. Import A2_GRAMMAR_CONTENT from './a2-grammar-content'
2. Import isValidVocabularyWord from './vocabulary-patterns'

3. Add enhanceWithTemplate() function (copy from parse-a1-structure.ts):
   - Match grammar note title to template using titleVariants
   - If explanation <50 chars → use template explanation
   - If examples <3 → merge extracted + template examples (dedupe)

4. Update extractVocabulary() to filter using isValidVocabularyWord():
   - Filter out stop words
   - Require 3+ character length
   - Keep only Cyrillic words

5. Update extractGrammarNotes() to call enhanceWithTemplate() on each note

Do NOT change lesson structure, page ranges, or other parsing logic - only add quality enhancement.
  </action>
  <verify>npx tsc --noEmit scripts/curriculum/parse-a2-structure.ts</verify>
  <done>Parser imports templates, filters vocabulary with stop words, enhances grammar with templates, compiles without errors</done>
</task>

<task type="auto">
  <name>Task 3: Regenerate A2 content and verify quality</name>
  <files>data/curriculum/structured/a2-lozje.json</files>
  <action>
1. Run the updated parser:
   ```bash
   npx tsx scripts/curriculum/parse-a2-structure.ts
   ```

2. Verify vocabulary quality:
   - Check total count (should decrease with filtering)
   - Verify no stop words in output
   - Confirm all lessons have 10+ items

3. Verify grammar quality:
   - All 46 notes should have explanations 50+ chars
   - All notes should have 3+ examples
   - No "Grammar: [topic]" placeholder content

4. Run audit script to confirm:
   ```bash
   npx tsx scripts/curriculum/audit-extraction.ts
   ```

Quality targets:
- Vocabulary: All items pass isValidVocabularyWord()
- Grammar: 0 short explanations, 0 low examples
  </action>
  <verify>
npx tsx -e "
const data = require('./data/curriculum/structured/a2-lozje.json');
let shortExp = 0, lowEx = 0;
for (const ch of data.chapters) {
  for (const note of ch.grammarNotes) {
    if (note.content.length < 50) shortExp++;
    if (note.examples.length < 3) lowEx++;
  }
}
console.log('Short explanations:', shortExp, shortExp === 0 ? '✓' : '✗');
console.log('Low examples:', lowEx, lowEx === 0 ? '✓' : '✗');
process.exit(shortExp + lowEx > 0 ? 1 : 0);
"
  </verify>
  <done>A2 content regenerated with 0 short explanations, 0 low examples, filtered vocabulary</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes for both new/modified files
- [ ] a2-lozje.json regenerated with quality content
- [ ] All 46 grammar notes have 50+ char explanations
- [ ] All grammar notes have 3+ examples
- [ ] Vocabulary filtered (count should decrease from 9,905)
- [ ] All 8 lessons still have vocabulary and grammar content
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- A2 meets same quality criteria as A1 (Phase 10-11 outcomes)
- No TypeScript errors
- Phase 12 complete
</success_criteria>

<output>
After completion, create `.planning/phases/12-a2-content-population/12-01-SUMMARY.md` with:
- Vocabulary before/after counts
- Grammar notes quality improvement stats
- Any decisions or deviations
- Confirmation ready for Phase 13 (B1 Content Bootstrap)
</output>
