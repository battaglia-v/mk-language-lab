---
phase: 16-practice-ux-redesign
plan: 01
type: execute
subsystem: practice
---

<objective>
Expose lesson vocabulary review in PracticeHub so users can practice vocabulary from completed lessons.

Purpose: Currently PracticeHub only shows the generic "curated" deck (200+ cards). The `loadLessonReviewDeck()` function exists but isn't surfaced in the UI. Users who complete lessons expect to practice that specific vocabulary.
Output: New "Lesson Review" practice mode card visible in PracticeHub that loads vocabulary from completed lessons.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-practice-integration/15-01-SUMMARY.md
@.planning/phases/16-practice-ux-redesign/CONTEXT.md

# Key files:
@components/practice/PracticeHub.tsx
@components/practice/usePracticeDecks.ts

**Tech stack available:** Next.js 16 App Router, TypeScript, Tailwind CSS, shadcn/ui
**Established patterns:** Practice mode cards with href, icon, variant

**Constraining decisions:**
- [Phase 15]: loadLessonReviewDeck() already exists and calls /api/practice/lesson-vocab
- [Phase 3]: Practice integrity requires lesson-first content - this deck must only show completed lesson vocab

**Issues being addressed:**
- User feedback: "I marked the first lesson as complete, but I only see the generic 200+ cards"
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Lesson Review mode card to PracticeHub</name>
  <files>components/practice/PracticeHub.tsx, messages/en.json, messages/mk.json</files>
  <action>
1. Add a new practice mode to the `modes` array in PracticeHub:
   - id: 'lessonReview'
   - href: `/${locale}/practice/session?deck=lesson-review&mode=multiple-choice`
   - icon: BookOpen (import from lucide-react)
   - variant: 'default'
   - cardCount: Use lessonReviewDeck.length from usePracticeDecks
   - disabled: if lessonReviewDeck.length === 0
   - disabledReason: "Complete a lesson to unlock vocabulary review"

2. Import `lessonReviewDeck` from usePracticeDecks hook (already exported)

3. Call `loadLessonReviewDeck()` on mount via useEffect to populate the deck

4. Add translations to both en.json and mk.json under practiceHub.modes.lessonReview:
   - title: "Lesson Review" / "Преглед на лекции"
   - description: "Practice vocabulary from completed lessons" / "Вежбај вокабулар од завршени лекции"
   - time: "5–10 min" / "5–10 мин"
   - xp: "+15 XP"

5. Position the new card BEFORE the "vocabulary" (curated) card in otherModes, so lesson-specific content is prioritized.
  </action>
  <verify>
1. npm run type-check passes
2. npm run lint passes
3. Visual: Practice page shows "Lesson Review" card (disabled state if no completed lessons)
  </verify>
  <done>
- Lesson Review card visible in PracticeHub
- Card links to /practice/session?deck=lesson-review
- Card shows count of available vocabulary items
- Card is disabled with helpful message when no lessons completed
- Translations present in both en.json and mk.json
  </done>
</task>

<task type="auto">
  <name>Task 2: Handle deck=lesson-review in practice session</name>
  <files>app/[locale]/practice/session/page.tsx</files>
  <action>
1. Check that the practice session page handles deck=lesson-review query param
2. The usePracticeDecks.getDeck('lesson-review') should already work
3. Add call to loadLessonReviewDeck() when deck param is 'lesson-review' before session starts
4. If deck is empty after loading, show friendly message: "No vocabulary available. Complete some lessons first!"
  </action>
  <verify>
1. Navigate to /practice/session?deck=lesson-review
2. Verify correct deck loads (from completed lessons) or shows empty state message
3. No console errors
  </verify>
  <done>
- Practice session loads lesson-review deck when ?deck=lesson-review
- Empty state handled gracefully with user-friendly message
- Session works with actual vocabulary from completed lessons
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Lesson Review practice mode added to PracticeHub</what-built>
  <how-to-verify>
    1. Open browser to https://mklanguage.com/practice (or dev server)
    2. Verify "Lesson Review" card appears in the practice modes list
    3. If you have completed lessons: card should show item count and be clickable
    4. If no completed lessons: card should be disabled with message "Complete a lesson to unlock"
    5. Click the card (if enabled) and verify practice session starts with lesson vocabulary
    6. Check both English and Macedonian locales for proper translations
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run type-check passes
- [ ] npm run lint passes
- [ ] Lesson Review card appears in PracticeHub
- [ ] Card correctly shows enabled/disabled state based on completed lessons
- [ ] Practice session loads correct vocabulary
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- User can access lesson-specific vocabulary from PracticeHub
- No TypeScript or linting errors
</success_criteria>

<output>
After completion, create `.planning/phases/16-practice-ux-redesign/16-01-SUMMARY.md`
</output>
